# 20231122 TIL

[TOC]

## Go 判断 time.Time 是否为空

1、数据表结构定义时，时间字段类型定义为 *time.Time，如下：

```go
type Test struct {
	...
	ExpiredAt *time.Time     `gorm:"column:expired_at;type:datetime" json:"expired_at"`
    ...
}
```

判断时可以判断该字段不为 nil，以空指针形式进行判断，如下：

```go
if expired_at != nil {
    ...
}
```

2、数据表结构定义时，时间字段类型定义为 sql.NullTime，如下：

```go
type Test struct {
	...
	ExpiredAt  sql.NullTime        `gorm:"type:datetime;column:expired_at;" json:"expired_at"`
    ...
}
```

sql.NullTime 结构如下：

```go
// NullTime represents a time.Time that may be null.
// NullTime implements the Scanner interface so
// it can be used as a scan destination, similar to NullString.
type NullTime struct {
	Time  time.Time
	Valid bool // Valid is true if Time is not NULL
}
```

判断时可以根据 sql.NullTime 中字段 Valid 是否为 True，如下：

```go
if instance.ExpiredAt.Valid {
    ...
}
```

